---
layout: post
title: "[JS] DOM이란?"
subtitle: "[JS] DOM이란?"
date: 2022-08-08 17:00
categories:
  - devlog
tag: [javascript, zerobase, frontend]
image:
  path: ../../../assets/img/jslogo.jpeg
---

# [JS] DOM이란?

## DOM 학습에 앞서… 시맨틱(Semantic) HTML?

시맨틱(Semantic) HTML을 직역하면 **의미론적 HTML**이 된다.

의미론적이란 언어에서 단어와 구절의 의미를 아는걸 뜻한다. 즉, Semantic elements란 ‘의미를 가진 elements’를 뜻한다.

HTML에서 semantic element는 해당 element의 의미를 **브라우저**와 **개발자** 모두에게 알려줄 수 있다!

### **시맨틱하지 않은(non-semantic) elements의 예시**

**<div>** 와 **<span>** 이 있다. 이 **element** 는 내용물에 대한 어떠한 것도 알려주지 못한다. **<div>** 와 **<span>** 만으로 이루어진 코드도 물론 돌아가겠지만, 내중에 내용물에 대한 어떠한 정보도 알 수 없게 된다.

---

### **시맨틱한(semantic) elements의 예시**

**<form>** , **<table>** , 그리고 **<article>** 등이 있다. 이러한 elements 들은 그들의 내용에 대한 확실한 정보를 제공한다.

---

### **시맨틱한(semantic) HTML을 짜야 하는 이유**

이를 알기 위해서는 검색 엔진의 웹사이트 정보 수집 방법에 대해 먼저 알아야 한다.

구글이나 네이버가 사용하는 검색엔진은 봇을 이용하여 전세계에 있는 **[웹사이트의 정보를 수집](https://ko.wikipedia.org/wiki/%EC%9B%B9_%ED%81%AC%EB%A1%A4%EB%9F%AC)**한다. 이 과정에서 사용자가 검색할 만한 키워드를 미리 예상하여 해당 웹사이트의 키워드에 대응하는 인덱스를 만들게 되는데, 이러한 인덱스를 생성할 때 활용되는 정보는 당연히 웹사이트의 HTML 코드이다. 그리고, 이 과정에서 Semantic Elements를 해석하게 된다.

**만일 Semantic Element가 없다면 HTML 코드에서 어떤 부분이 중요하고 어떤 부분이 중요하지 않은 지 알 수 없게 된다.** 이는 해당 웹사이트의 인덱싱을 어렵게 만드는 안 좋은 결과를 초래할 수 있다.

---

## 문서 객체 모델(DOM)이란?

Document Object Model의 약자로 XML이나 HTML 문서에 접근하기 위한 일종의 인터페이스이다.

---

- **JavaScript**는 **DOM**을 통해서 **HTML로 구성된 문서를 제어**한다.
- 문서에 프로그래밍적으로 엑세스하고 변형하기 위한 프로그래밍 인터페이스.
- 모든 요소와 요소의 어트리뷰트, 텍스트를 각각의 객체로 만들고 이들 객체를 부자 관계로 표현할 수 있는 **트리 구조**로 구성한 것.
- **JavaScript**를 통해 동적으로 변경할 수 있으며 변경된 DOM은 렌더링에 반영된다.
- **JavaScript 언어의 일부는 아니다.**

---

![client-server](../../assets/img/develop/2022-08-08-dev-js-dom/client-server.png)

→ 브라우저는 웹 문서를 로드한 후, 파싱하여 DOM을 생성한다.

---

## DOM tree

![dom-tree](../../assets/img/develop/2022-08-08-dev-js-dom/dom-tree.png)

**DOM**에서 모든 요소, 어트리뷰트, 텍스트는 하나의 객체이며 Document 객체의 자식이다. 요소의 중첩관계는 객체의 **트리**로 구조화하여 표현하는데, **DOM tree**의 진입점(Entry point)는 document 객체이며 최종점은 요소의 텍스트를 나타내는 객체이다.

**DOM tree**는 네 종류의 노드로 구성된다.

- **문서 노드(Document Node)**
  → 트리의 최상위에 존재하며 각각 요소, 어트리뷰트, 텍스트 노드에 접근하려면 문서 노드를 통해야 한다. 즉, **시작점(entry point) 역할**.
- **요소 노드(Element Node)**
  → 요소 노드는 HTML 요소를 표현한다.
- **어트리뷰트 노드(Attribute Node)**
  → 어트리뷰트 노드는 HTML 요소의 어트리뷰트를 표현한다.
- **텍스트 노드(Text Node)**
  → 텍스트 노드는 HTML 요소의 텍스트를 표현한다. 텍스트 노드는 요소 노드의 자식이며 자식 노드를 가질 수 없다. 즉, **DOM tree의 최종단**이다.
  ![dom-tree](../../assets/img/develop/2022-08-08-dev-js-dom/dom-tree-1.png)

---

## DOM 속성

### 하나의 요소 노드 선택

**[document.getElementById(id)](https://developer.mozilla.org/ko/docs/Web/API/Document/getElementById)**

- id 어트리뷰트 값으로 요소 노드를 한 개 선택한다. 복수개가 선택된 경우에는 첫번째 요소만 반환한다.
- Return: HTMLElement를 상속받은 객체

```jsx
// id로 하나의 요소를 선택한다.
const elem = document.getElementById("one");
// 클래스 어트리뷰트의 값을 변경한다.
elem.className = "blue";

// 그림: DOM tree의 객체 구성 참고
console.log(elem); // <li id="one" class="blue">Seoul</li>
console.log(elem.__proto__); // HTMLLIElement
console.log(elem.__proto__.__proto__); // HTMLElement
console.log(elem.__proto__.__proto__.__proto__); // Element
console.log(elem.__proto__.__proto__.__proto__.__proto__); // Node
```

**[document.querySelector(cssSelector)](https://developer.mozilla.org/ko/docs/Web/API/Document/querySelector)**

- CSS 셀렉터를 사용하여 요소 노드를 한 개 선택한다. 복수개가 선택된 경우, 첫번째 요소만 반환한다.
- Return: HTMLElement를 상속받은 객체

```jsx
// CSS 셀렉터를 이용해 요소를 선택한다
const elem = document.querySelector("li.red");
// 클래스 어트리뷰트의 값을 변경한다.
elem.className = "blue";
```

### 여러 개의 요소 노드 선택

**[document.getElementsByClassName(class)](https://developer.mozilla.org/ko/docs/Web/API/Document/getElementsByClassName)**

- class 어트리뷰트 값으로 요소 노드를 모두 선택한다. 공백으로 구분하여 여러 개의 class를 지정할 수 있다.
- Return: HTMLCollection (live)

```jsx
// HTMLCollection을 반환한다. HTMLCollection은 live하다.
const elems = document.getElementsByClassName("red");

for (let i = 0; i < elems.length; i++) {
  // 클래스 어트리뷰트의 값을 변경한다.
  elems[i].className = "blue";
}
```

**[document.getElementsByTagName(tagName)](https://developer.mozilla.org/ko/docs/Web/API/Element/getElementsByTagName)**

- 태그명으로 요소 노드를 모두 선택한다.
- Return: HTMLCollection (live)

```jsx
// HTMLCollection을 반환한다.
const elems = document.getElementsByTagName("li");

[...elems].forEach((elem) => (elem.className = "blue"));
```

**[document.querySelectorAll(selector)](https://developer.mozilla.org/ko/docs/Web/API/Document/querySelectorAll)**

- 지정된 CSS 선택자를 사용하여 요소 노드를 모두 선택한다.
- Return: [NodeList](https://developer.mozilla.org/ko/docs/Web/API/NodeList) (non-live)

```jsx
// Nodelist를 반환한다.
const elems = document.querySelectorAll("li.red");

[...elems].forEach((elem) => (elem.className = "blue"));
```

---

## DOM 조작

### 텍스트 노드에의 접근/수정

요소의 텍스트는 텍스트 노드에 저장되어 있고, 이에 접근하려면 다음과 같은 수순이 필요하다.

1. 해당 텍스트 노드의 부모 노드를 선택한다. 텍스트 노드는 요소 노드의 자식이다.
2. firtstChild 프로퍼티를 사용하여 텍스트 노드를 탐색한다.
3. 텍스트 노드의 유일한 프로퍼티(**nodeValue**)를 이용하여 텍스트를 취득한다.
4. **nodeValue** 를 이용하여 텍스트를 수정한다.

**[nodeValue](https://developer.mozilla.org/ko/docs/Web/API/Node/nodeValue)**

- 노드의 값을 반환한다.
- Return: 텍스트 노드의 경우는 문자열, 요소 노드의 경우 null 반환

[nodeName](https://developer.mozilla.org/ko/docs/Web/API/Node/nodeName), [nodeType](https://developer.mozilla.org/ko/docs/Web/API/Node/nodeType)을 통해 노드의 정보를 취득할 수 있다.

```jsx
// 해당 텍스트 노드의 부모 요소 노드를 선택한다.
const one = document.getElementById("one");
console.dir(one); // HTMLLIElement: li#one.red

// nodeName, nodeType을 통해 노드의 정보를 취득할 수 있다.
console.log(one.nodeName); // LI
console.log(one.nodeType); // 1: Element node

// firstChild 프로퍼티를 사용하여 텍스트 노드를 탐색한다.
const textNode = one.firstChild;

// nodeName, nodeType을 통해 노드의 정보를 취득할 수 있다.
console.log(textNode.nodeName); // #text
console.log(textNode.nodeType); // 3: Text node

// nodeValue 프로퍼티를 사용하여 노드의 값을 취득한다.
console.log(textNode.nodeValue); // Seoul

// nodeValue 프로퍼티를 이용하여 텍스트를 수정한다.
textNode.nodeValue = "Pusan";
```

### \***\*어트리뷰트 노드에의 접근/수정\*\***

**[className](https://developer.mozilla.org/ko/docs/Web/API/Element/className)**

- class 어트리뷰트의 값을 취득 또는 변경한다. className 프로퍼티에 값을 할당하는 경우, class 어트리뷰트가 존재하지 않으면 class 어트리뷰트를 생성하고 지정된 값을 설정한다. class 어트리뷰트의 값이 여러 개일 경우, 공백으로 구분된 문자열이 반환되므로 String 메소드 `split(' ')`를 사용하여 배열로 변경하여 사용한다.

**[classList](https://developer.mozilla.org/ko/docs/Web/API/Element/classList)**

- add, remove, item, toggle, contains, replace 메소드를 제공한다.

**[id](https://developer.mozilla.org/ko/docs/Web/API/Element/id)**

- id 어트리뷰트의 값을 취득 또는 변경한다. id 프로퍼티에 값을 할당하는 경우, id 어트리뷰트가 존재하지 않으면 id 어트리뷰트를 생성하고 지정된 값을 설정한다.

**[hasAttribute(attribute)](https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttribute)**

- 지정한 어트리뷰트를 가지고 있는지 검사한다.
- Return : Boolean

**[getAttribute(attribute)](https://developer.mozilla.org/ko/docs/Web/API/Element/getAttribute)**

- 어트리뷰트의 값을 취득한다.
- Return : 문자열

**[setAttribute(attribute, value)](https://developer.mozilla.org/ko/docs/Web/API/Element/setAttribute)**

- 어트리뷰트와 어트리뷰트 값을 설정한다.
- Return : undefined

**[removeAttribute(attribute)](https://developer.mozilla.org/ko/docs/Web/API/Element/removeAttribute)**

- 지정한 어트리뷰트를 제거한다.
- Return : undefined

### HTML 콘텐츠 조작(Manipulation)

**[textContent](https://developer.mozilla.org/ko/docs/Web/API/Node/textContent)**

- 요소의 텍스트 콘텐츠를 취득 또는 변경한다. 이때 마크업은 무시된다. textContent를 통해 요소에 새로운 텍스트를 할당하면 텍스트를 변경할 수 있다. 이때 순수한 텍스트만 지정해야 하며 마크업을 포함시키면 문자열로 인식되어 그대로 출력된다.

**[innerText](https://developer.mozilla.org/ko/docs/Web/API/Node/innerText)**

- 텍스트 콘텐츠에만 접근할 수 있지만, 사용하지 않는 것을 권장

**[innerHTML](https://developer.mozilla.org/ko/docs/Web/API/Element/innerHTML)**

- 해당 요소의 모든 자식 요소를 포함하는 모든 콘텐츠를 하나의 문자열로 취득할 수 있다. 이 문자열은 마크업을 포함한다.

---

## DOM 사용 예시

```html
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <script type="text/javascript">
      function sync() {
        // title 엘리먼트를 찾는다.
        var title = document.getElementById("title");
        // output 엘리먼트를 찾는다.
        var output = document.getElementById("output");
        // output 엘리먼트안에 title의 값을 삽입한다.
        output.innerHTML = title.value;
      }
    </script>
  </head>
  <body>
    <div style="background-color: gray;" id="output">output</div>
    <input type="text" value="egoing" id="title" onchange="sync()" />
    <script>
      sync();
    </script>
  </body>
</html>
```

---

### 참조

[웹 프로그래밍 튜토리얼: PoiemaWeb](https://poiemaweb.com/)

[생활코딩: DOM](https://opentutorials.org/course/1567/24)

[MDN Web API: Node](https://developer.mozilla.org/ko/docs/Web/API/Node)
